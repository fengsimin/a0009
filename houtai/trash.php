<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\x74\x72\141\163\150"; parent::__construct(); } protected function postDelete($request_data) { goto F_uI7; b1j8t: if (count($error) === 0) { goto a4ZOM; } goto wq6Jv; Mo67Q: a4ZOM: goto FVu3P; zx3WP: goto xPIpA; goto Mo67Q; ojALX: $this->_log("\x64\x65\x6c\x65\164\145", array("\x74\x69\164\154\x65" => count($ids))); goto jYvoG; nmMF9: $this->db->beginTransaction(); goto MdNAU; F_uI7: $error = array(); goto yWC0m; yWC0m: $ids = $request_data["\x69\144"]; goto nmMF9; kCTEi: return $this->error(); goto zx3WP; y3LmM: xPIpA: goto lpBt6; wq6Jv: $this->db->rollBack(); goto kCTEi; bJLEi: uDcKW: goto b1j8t; MdNAU: foreach ($ids as $id) { goto JCuTk; fKnAF: $error[] = $trash["\x74\x69\x74\x6c\x65"]; goto XIA2d; asNuE: G0IlY: goto rsdYD; kgkBR: DuEmR: goto asNuE; V2BAd: if (!($path && count(explode("\57", $path)) >= 2)) { goto DuEmR; } goto yNFlX; W_c8k: RQzq7: goto V2BAd; JCuTk: $trash = $this->db->select($this->table)->where(array("\151\144", "\75", $id))->get(); goto qryc3; qryc3: $path = $trash["\160\141\164\x68"]; goto aPaEf; yNFlX: $this->_rmdir("\56\x2e\x2f" . $path); goto kgkBR; rsdYD: LHh8X: goto HSSLt; XIA2d: goto G0IlY; goto W_c8k; aPaEf: if ($this->db->delete($this->table, array("\x69\x64", "\75", $id))->is()) { goto RQzq7; } goto fKnAF; HSSLt: } goto bJLEi; jYvoG: return $this->success(); goto y3LmM; FVu3P: $this->db->commit(); goto ojALX; lpBt6: } protected function postReplay($request_data) { goto e_vui; ZCmU8: return $this->error(); goto ymu54; VuDL4: $this->db->rollBack(); goto ZCmU8; ymu54: goto dGHRs; goto xiF5j; hQI6T: $this->db->commit(); goto kL2ET; z74jc: $ids = $request_data["\x69\144"]; goto cFBed; Io9Pi: if (count($error) === 0) { goto uQ_hs; } goto VuDL4; cFBed: $this->db->beginTransaction(); goto bOar7; kL2ET: $this->_log("\162\x65\x70\x6c\171", array("\164\x69\x74\x6c\145" => count($ids))); goto QF6tG; Y8V5A: dGHRs: goto HTyV0; QF6tG: return $this->success(); goto Y8V5A; e_vui: $error = array(); goto z74jc; xiF5j: uQ_hs: goto hQI6T; MsRJm: LVnoU: goto Io9Pi; bOar7: foreach ($ids as $id) { goto shzOR; p4taU: $isadd = $this->db->insert($table, json_decode($trash["\144\x61\164\141"], true)); goto waiNP; shzOR: $trash = $this->db->select($this->table)->where(array("\151\x64", "\x3d", $id))->get(); goto UopPL; Q35iD: oNFOh: goto bO8kb; waiNP: if ($isadd === false) { goto wUgZ7; } goto GeTxC; VsEuZ: wUgZ7: goto eib_9; eib_9: $error[] = $trash["\x74\151\164\x6c\x65"]; goto ts9OK; UopPL: $table = $trash["\x74\141\x62\x6c\145"]; goto p4taU; ts9OK: w6kOv: goto Q35iD; GeTxC: $this->db->delete($this->table, array("\151\x64", "\75", $id)); goto MfJ16; MfJ16: goto w6kOv; goto VsEuZ; bO8kb: } goto MsRJm; HTyV0: } }
