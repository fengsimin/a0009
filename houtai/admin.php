<?php
//Copyright (c) 2016 iFeiwu.com
 class Admin extends Item { function __construct() { $this->table = "\x61\144\x6d\x69\156"; parent::__construct(); } public function postLogin($request_data) { goto MyQ5K; xSV_J: $admin["\162\x75\156\x74\151\x6d\145"] = $this->_runtime(); goto fQ0bJ; n1ZgX: ifeiwu\Loader::import("\145\x78\164\145\x6e\144\57\x50\x61\163\x73\167\157\162\x64\x48\x61\x73\150"); goto qz46m; lBdF9: if ($hasher->CheckPassword($pass, $admin["\x70\141\163\x73"])) { goto eLNR7; } goto iAqYa; qz46m: $hasher = new PasswordHash(8, false); goto lBdF9; XMF3c: $this->db->update($this->table, array("\x6a\x73\157\156" => json_encode($json)), array("\151\x64", "\x3d", $admin["\x69\144"])); goto xSV_J; iAqYa: return $this->error("\347\x94\xa8\xe6\210\267\xe5\x90\x8d\xe6\210\226\345\xaf\x86\347\xa0\201\344\xb8\x8d\346\255\xa3\xe7\xa1\xae\xef\274\x81"); goto xDq4i; lNY4L: $json["\x6c\x6f\147\x69\x6e\x5f\151\160"] = $this->_getIP(); goto ATu5q; jrlUP: return $this->success($admin); goto lnXXr; inG9p: if ($admin) { goto q3Edw; } goto mMITC; qjL1F: $json = json_decode($admin["\152\163\157\x6e"], true); goto DA3D_; xDq4i: eLNR7: goto qjL1F; DA3D_: $json["\x6c\157\147\x69\156\137\164\x69\x6d\145"] = date("\x59\55\155\x2d\x64\40\x48\x3a\x69"); goto lNY4L; mMITC: return $this->error("\347\224\xa8\xe6\210\xb7\345\x90\215\xe6\x88\226\xe5\xaf\x86\xe7\xa0\x81\xe4\xb8\x8d\xe6\255\xa3\xe7\241\256\357\xbc\x81"); goto SBh0y; SBh0y: q3Edw: goto n1ZgX; fQ0bJ: $this->_log("\x6c\x6f\x67\x69\156", array("\x61\144\x6d\x69\x6e\137\x69\144" => $admin["\151\x64"], "\x61\144\x6d\x69\156\x5f\156\x61\155\145" => $admin["\156\x61\155\145"])); goto jrlUP; MyQ5K: $name = $request_data["\156\141\x6d\145"]; goto tqPaO; tqPaO: $pass = $request_data["\x70\x61\163\x73"]; goto eOroF; eOroF: $admin = $this->db->select($this->table)->where("\x73\x74\141\x74\145\x20\x3d\40\61\x20\x41\116\104\x20\x6e\x61\155\145\x20\75\x20\x3f", array($name))->get(); goto inG9p; ATu5q: $json["\154\157\147\x69\156\137\x63\157\165\156\164"] = $json["\x6c\x6f\147\x69\156\x5f\x63\157\165\156\x74"] + 1; goto XMF3c; lnXXr: } protected function postPassword($id, $request_data) { goto p3bG4; cB7N6: ifeiwu\Loader::extend("\120\141\163\x73\167\157\x72\x64\110\x61\x73\x68"); goto Wsq4M; XsC97: return $this->success("\350\257\xb7\xe4\xbd\277\xe7\x94\250\346\x96\260\345\257\x86\xe7\xa0\x81\351\x87\x8d\xe6\226\xb0\xe7\x99\xbb\345\275\x95\xef\xbc\201"); goto AuAmV; VwzYE: EiXZ4: goto XsC97; UoYQK: $pass = $request_data["\x70\141\163\163"]; goto cB7N6; Z921R: $old_pass = $request_data["\157\x6c\144\160\141\x73\x73"]; goto UoYQK; gZ5yk: if ($this->db->update($this->table, $data, array("\151\x64", "\x3d", $id))->is()) { goto EiXZ4; } goto qsCAX; v6fDr: YmRJB: goto ZivxC; p3bG4: $admin = $this->db->select($this->table)->where("\163\x74\141\164\145\40\x3d\x20\x31\x20\x41\116\104\40\x69\x64\x20\x3d\40\x3f", array($id))->get(); goto Z921R; WiWhs: if ($hasher->CheckPassword($old_pass, $admin["\x70\x61\163\x73"])) { goto YmRJB; } goto zAQpi; AuAmV: m19Qo: goto rW5c0; zAQpi: return $this->error("\xe6\227\247\xe5\257\x86\347\240\201\344\xb8\215\346\xad\243\347\241\xae\xef\xbc\x81"); goto v6fDr; ZivxC: $json = json_decode($admin["\x6a\x73\x6f\x6e"], true); goto iEV4K; Wsq4M: $hasher = new PasswordHash(8, false); goto WiWhs; BBxwy: goto m19Qo; goto VwzYE; iEV4K: $json["\160\x61\x73\163\x5f\164\x69\x6d\x65"] = time(); goto Qmy29; qsCAX: return $this->error("\xe8\xaf\267\xe7\xa8\215\xe5\x80\231\345\206\x8d\350\257\x95\56\56\x2e"); goto BBxwy; Qmy29: $data = array("\160\141\x73\163" => $hasher->HashPassword($pass), "\x6a\x73\x6f\156" => json_encode($json)); goto gZ5yk; rW5c0: } protected function postPassword2($request_data) { goto e1is7; Me81t: goto rOY3m; goto YwsJT; e1is7: $pass = $request_data["\x70\x61\x73\163"]; goto hhpjU; hhpjU: ifeiwu\Loader::extend("\120\141\163\163\167\157\162\x64\x48\x61\x73\x68"); goto XjR0X; Ud3uj: return $this->success(); goto uvMfL; uvMfL: rOY3m: goto OU0pI; thNVU: if ($this->db->update($this->table, array("\160\x61\x73\163" => $hasher->HashPassword($pass)), "\x69\144\40\75\40\x31")->is()) { goto Uxvi9; } goto sNfBo; sNfBo: return $this->error("\351\x94\x99\350\257\257\xef\274\214\350\xaf\267\347\250\215\xe5\x80\231\xe5\206\x8d\xe8\257\225\56\x2e\x2e"); goto Me81t; XjR0X: $hasher = new PasswordHash(8, false); goto thNVU; YwsJT: Uxvi9: goto Ud3uj; OU0pI: } protected function postAdd($request_data) { goto OEgsG; OEgsG: ifeiwu\Loader::import("\x65\x78\164\x65\156\144\57\x50\141\x73\x73\x77\x6f\162\x64\x48\x61\x73\x68"); goto fxibu; m8iQ3: d3bv_: goto BdHWV; ntJtU: $data["\143\164\x69\155\145"] = time(); goto Mg_uO; xyLmU: return $this->success(); goto c5vt4; fxibu: $hasher = new PasswordHash(8, false); goto HC2Ez; NdKuE: goto aMB5G; goto m8iQ3; SXnyp: $data["\152\x73\x6f\x6e"] = json_encode(array("\154\x61\x73\x74\x5f\164\151\x6d\x65" => "\55\55\x2d\x2d\x2d", "\154\141\163\x74\137\x69\x70" => "\60\56\60\x2e\x30\56\x30", "\x6c\x6f\x67\x69\x6e\x5f\143\157\165\x6e\x74" => 0)); goto ntJtU; BdHWV: $this->_log("\x61\x64\144", array("\x74\151\164\x6c\x65" => $data["\x6e\x61\x6d\145"])); goto xyLmU; pgz5k: $data["\162\142\141\x63"] = $request_data["\162\x62\141\x63"] ?: "\156\157\x72\155\141\154"; goto SXnyp; Mg_uO: if ($this->db->insert($this->table, $data)->is()) { goto d3bv_; } goto oKDpd; HC2Ez: $data["\156\x61\155\145"] = $request_data["\x6e\x61\x6d\145"]; goto hDbjs; FwM6c: $data["\x73\x74\x61\164\145"] = $request_data["\163\x74\x61\164\x65"] ?: 0; goto pgz5k; oKDpd: return $this->error("\345\xb8\220\xe5\x8f\267\345\xb7\xb2\345\255\x98\345\234\250\xef\274\x81"); goto NdKuE; hDbjs: $data["\160\141\163\x73"] = $hasher->HashPassword($request_data["\x70\x61\163\x73"]); goto FwM6c; c5vt4: aMB5G: goto kReCX; kReCX: } protected function postUpdate($id, $request_data) { goto ETGAg; qKJlf: $data["\x70\x61\x73\x73"] = $hasher->HashPassword($request_data["\x70\141\x73\163"]); goto Ib1qH; r6Z4t: $data["\155\157\142\151\x6c\x65"] = $request_data["\155\x6f\142\x69\154\x65"]; goto mrOZH; ycnyQ: $data["\x6e\141\x6d\x65"] = $request_data["\x6e\x61\x6d\145"]; goto pTlpw; pTlpw: Aiu2A: goto NMKEC; E8t0r: $data["\165\x74\151\x6d\x65"] = time(); goto fVC_4; fVC_4: if ($this->db->update($this->table, $data, array("\151\144", "\75", $id))->is()) { goto PI1TR; } goto JSzpr; p8ZCy: PI1TR: goto TOXjb; lKjRY: APfg7: goto k4Fxo; TBu64: ozxK0: goto zmCEF; TOXjb: $this->_log("\165\x70\x64\x61\164\x65", array("\x74\x69\164\x6c\x65" => $data["\156\x61\x6d\x65"])); goto x3osJ; k4Fxo: if (!isset($request_data["\160\x61\x73\163"])) { goto WYPDm; } goto qKJlf; wE7Hr: if (!isset($request_data["\x72\x62\x61\x63"])) { goto APfg7; } goto ILx4N; Ib1qH: WYPDm: goto fbFVb; fbFVb: $data["\x72\145\x61\154\156\141\155\145"] = $request_data["\162\x65\x61\154\x6e\141\x6d\145"]; goto YKd1M; nSlyD: $hasher = new PasswordHash(8, false); goto JXE_f; NMKEC: if (!isset($request_data["\x73\x74\x61\x74\x65"])) { goto nk6WN; } goto fONtw; fONtw: $data["\163\x74\x61\x74\x65"] = $request_data["\x73\x74\141\x74\x65"]; goto pYICL; mrOZH: $data["\151\x6e\x74\162\157"] = $request_data["\151\156\x74\x72\x6f"]; goto yAZYN; mB16X: goto ozxK0; goto p8ZCy; EaP54: $data["\x73\145\170"] = $request_data["\x73\x65\x78"]; goto E8t0r; pYICL: nk6WN: goto wE7Hr; yAZYN: $data["\x71\x71"] = $request_data["\x71\x71"]; goto EaP54; JXE_f: if (!isset($request_data["\156\141\x6d\145"])) { goto Aiu2A; } goto ycnyQ; ETGAg: ifeiwu\Loader::import("\x65\x78\164\x65\x6e\x64\57\x50\141\163\x73\x77\x6f\x72\x64\110\x61\163\x68"); goto nSlyD; ILx4N: $data["\162\142\141\143"] = $request_data["\162\x62\141\143"]; goto lKjRY; x3osJ: return $this->success(); goto TBu64; JSzpr: return $this->error("\350\257\xb7\xe7\xa8\215\345\200\x99\xe5\x86\x8d\xe8\xaf\x95\x2e\56\x2e"); goto mB16X; YKd1M: $data["\x61\x64\144\162\x65\x73\163"] = $request_data["\x61\144\144\x72\x65\x73\163"]; goto r6Z4t; zmCEF: } protected function postDelete($request_data) { goto PpNew; vMwSk: foreach ($ids as $id) { $this->db->delete($this->table, array("\151\144", "\75", $id)); P2mER: } goto jLVL9; jLVL9: qJjc8: goto CaHct; PpNew: $ids = $request_data["\151\x64"]; goto vMwSk; CaHct: return $this->success(); goto dWjD3; dWjD3: } protected function postToken($request_data) { goto IxN6v; pzG12: EdGwS: goto GK1R0; Zd6UO: return $this->success(); goto pzG12; IxN6v: if (!($token = $request_data["\x74\157\153\x65\x6e"])) { goto VTMiO; } goto pOlPD; GK1R0: VTMiO: goto ChI6_; ChI6_: return $this->error("\346\xb2\xa1\346\234\211\346\x9d\x83\xe9\x99\220\xe6\233\264\xe6\x8d\242\xe5\xaf\x86\xe9\222\xa5\357\274\201"); goto osvxL; pOlPD: if (!file_put_contents("\164\157\153\x65\156\56\x70\x68\x70", "\74\x3f\x70\x68\x70\x20\x72\x65\164\165\x72\x6e\x20\x27{$token}\x27\73")) { goto EdGwS; } goto Zd6UO; osvxL: } protected function postUpgrade($request_data) { goto SDVd9; NImAy: return $this->error("\346\227\240\xe6\xb3\x95\xe8\257\xbb\xe5\x8f\226\xe6\x96\207\344\xbb\xb6\xef\xbc\x8c\xe8\257\xb7\xe8\x81\224\xe7\xb3\273\xe9\243\x9e\345\261\x8b\xe5\256\xa2\346\x9c\x8d\xe3\x80\x82"); goto sCVot; S5xTz: J23G7: goto SJTu1; woug6: $upgrade_code = file_get_contents("\x68\164\x74\x70\72\x2f\57\151\146\145\151\167\x75\56\x63\x6f\155\x2f\147\145\x74\x2f\x75\160\x67\x72\141\144\x65\x3f\164\x3d" . time(), 0, $ctx); goto ZaR9h; IoA89: $json = curl_exec($ch); goto GSfAW; OEx7v: $json = json_decode($json, true); goto REprD; fv1Ix: s0Bvr: goto S5Z1I; gEf1M: return $this->error("\xe6\227\240\xe6\xb3\x95\345\x86\x99\xe5\205\xa5\346\226\x87\344\273\xb6\xef\274\214\350\xaf\267\346\x8a\212\xe7\x9b\256\345\275\225\xe8\xae\276\347\275\xae\xe4\270\xba\x30\x37\67\x37\xe5\217\xaf\xe5\206\231\346\x9d\203\351\x99\x90\xef\274\201"); goto fv1Ix; SDVd9: $ctx = stream_context_create(array("\x68\x74\164\160" => array("\164\151\155\145\157\x75\164" => 30))); goto woug6; FU0Hn: curl_setopt($ch, CURLOPT_HEADER, 0); goto t4l_I; REprD: if (!($json["\x63\157\x64\145"] == 1)) { goto J23G7; } goto rHllh; SJTu1: unlink("\56\56\x2f\165\x70\147\x72\141\x64\145\x2e\160\150\160"); goto qNwrr; rHllh: return $this->error($json["\x6d\x65\x73\163\141\147\145"]); goto S5xTz; sCVot: aW35X: goto B5gRd; dykX9: curl_setopt($ch, CURLOPT_POSTFIELDS, $curl_post); goto IoA89; GSfAW: curl_close($ch); goto OEx7v; B5gRd: if (file_put_contents("\x2e\56\x2f\165\160\x67\162\141\x64\x65\56\x70\150\160", $upgrade_code)) { goto s0Bvr; } goto gEf1M; t4l_I: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto x0FU9; qdHnV: $curl_post = array("\166\151\145\x77\x5f\x67\151\164" => $request_data["\166\x69\145\167\137\147\x69\x74"], "\166\x69\145\167\137\x6e\x61\x6d\145" => $request_data["\x76\x69\x65\167\137\156\x61\x6d\x65"], "\x76\x69\145\x77\137\166\x65\x72\x73\x69\157\156" => $request_data["\x76\151\145\x77\x5f\166\x65\162\163\151\157\x6e"]); goto hFFHh; H_nMn: curl_setopt($ch, CURLOPT_URL, $curl_url . "\57\165\x70\x67\162\141\144\x65\x2e\x70\150\160"); goto FU0Hn; x0FU9: curl_setopt($ch, CURLOPT_POST, 1); goto dykX9; qNwrr: unlink("\x2e\x2e\x2f\x75\x70\144\x61\164\145\x2e\160\x68\x70"); goto dofFC; mpvR2: return $this->success("\350\xbd\273\347\275\221\347\xab\231\xe5\215\207\xe7\xba\xa7\xe6\x88\x90\xe5\212\237\xef\xbc\201"); goto qSSBP; dofFC: unlink("\x2e\56\57\144\x61\x74\141\142\141\163\x65\56\163\161\154"); goto mpvR2; hFFHh: $ch = curl_init(); goto H_nMn; ZaR9h: if (!($upgrade_code === false)) { goto aW35X; } goto NImAy; S5Z1I: $curl_url = "\150\164\x74\160\72\x2f\x2f" . $_SERVER["\x53\105\x52\126\x45\122\x5f\116\101\115\105"] . implode("\57", array_slice(explode("\x2f", $_SERVER["\123\x43\x52\x49\x50\x54\x5f\116\101\x4d\105"]), 0, -2)); goto qdHnV; qSSBP: } protected function postPublish() { goto Gy05r; Gy05r: $this->_saveData("\x73\x69\164\145", array("\156\141\155\x65" => "\166\145\162\163\151\157\x6e", "\166\141\154\x75\145" => time()), array("\x6e\x61\155\145", "\75", "\x76\145\162\x73\151\x6f\x6e")); goto lYkTa; jhi0o: goto IwEJw; goto Rr9zh; mOIKf: R41je: goto t_vdI; lYkTa: if (is_dir("\x2e\56\x2f\x64\141\164\141\57\143\x61\x63\x68\145\57")) { goto R41je; } goto j3mc6; j3mc6: return $this->success(); goto mOIKf; t_vdI: if ($this->_rmdir("\56\x2e\57\x64\x61\164\141\x2f\143\141\143\150\x65\x2f") !== false) { goto QxiVe; } goto E8MUD; E8MUD: return $this->error(); goto jhi0o; y06MX: IwEJw: goto t_Rjh; Rr9zh: QxiVe: goto pjRW8; pjRW8: return $this->success(); goto y06MX; t_Rjh: } protected function getFiles($dir, $ext) { goto oYEar; ajjIP: if ($handle) { goto sUD4b; } goto Rtj_Z; R5zsK: $handle = opendir($dir); goto ajjIP; Rtj_Z: return $this->error($dir . "\346\x97\240\346\xb3\x95\xe6\x89\x93\345\274\200\347\x9b\256\345\275\x95\357\274\x81"); goto jfq3a; LXDv_: $ext = $ext ? $ext : "\x2e\x70\x68\x70"; goto R5zsK; m2jFC: sUD4b: goto x8AKr; Ci2Vu: goto So5DD; goto Dbf02; I3Ctp: $filename = $dir . "\57" . $file; goto gGzND; oYEar: $dir = $dir ? $dir : "\x2e"; goto LXDv_; x8AKr: So5DD: goto daiDN; vBxmx: $files[] = array("\x6e\141\x6d\x65" => $filename, "\143\x6f\x6e\x74\x65\156\x74" => $file_content); goto QFmOc; gGzND: if (!($ext == "\x2a" || strpos($filename, $ext))) { goto kHfBk; } goto FusLo; gMMdy: if (!($file != "\x2e" && $file != "\x2e\x2e")) { goto EvNFD; } goto I3Ctp; QFmOc: kHfBk: goto wIVYS; jfq3a: goto mCT5J; goto m2jFC; wsxQ3: closedir($handle); goto NwZhq; wIVYS: EvNFD: goto Ci2Vu; V1onZ: mCT5J: goto yE0Ns; daiDN: if (!(false !== ($file = readdir($handle)))) { goto PjC7w; } goto gMMdy; NwZhq: return $this->success($files); goto V1onZ; FusLo: $file_content = file_get_contents($filename); goto vBxmx; Dbf02: PjC7w: goto wsxQ3; yE0Ns: } protected function getFileContent($filename) { goto KuaRC; mp3JV: return $this->error($filename . "\40\346\x96\207\344\273\266\xe4\xb8\x8d\345\xad\230\xe5\x9c\xa8\357\xbc\x81"); goto VfgJ_; LDkwq: cHNAo: goto SIIzs; KuaRC: if (file_exists($filename)) { goto NmaGO; } goto mp3JV; HHvPQ: NmaGO: goto dz1KN; dz1KN: $content = file_get_contents($filename); goto gb_cQ; VfgJ_: goto cHNAo; goto HHvPQ; gb_cQ: return $this->success(array("\x6e\141\155\x65" => $filename, "\x63\x6f\x6e\x74\145\x6e\x74" => $content)); goto LDkwq; SIIzs: } protected function getFileConfig($name) { goto i8E70; AchsQ: goto U7HUV; goto PX6wY; Jxpte: return include $filename; goto cklBK; EKSSS: if (file_exists($filename)) { goto WNsph; } goto hhntB; hhntB: return $this->error($filename . "\x20\xe6\x96\207\xe4\273\xb6\xe4\270\215\345\255\230\345\234\250\357\xbc\201"); goto AchsQ; PX6wY: WNsph: goto Jxpte; i8E70: $filename = "\56\x2e\x2f\x63\157\156\146\151\x67\57" . $name . "\56\160\x68\x70"; goto EKSSS; cklBK: U7HUV: goto B5j15; B5j15: } protected function postFileWrite($request_data) { goto UXQA1; eKCQC: zz0Td: goto fOe3p; dVPHR: chmod($filename, 420); goto Yzylj; xgABm: return $this->error(); goto FffJS; FffJS: goto zz0Td; goto P71Cb; Kh3U9: if ($filename && $content) { goto QGlSh; } goto xgABm; afdxU: $content = $request_data["\143\157\156\164\145\156\x74"]; goto Kh3U9; UXQA1: $filename = $request_data["\x66\151\154\x65\156\141\x6d\145"]; goto afdxU; SEdWd: chmod($filename, 493); goto iAMFC; iAMFC: file_put_contents($filename, $content); goto dVPHR; P71Cb: QGlSh: goto SEdWd; Yzylj: return $this->success(); goto eKCQC; fOe3p: } protected function getBackup() { goto kqeqs; NLyrW: $qiniu_backup_types = explode("\54", $qiniu_backup_type); goto C2M9r; JxYHn: $this->_mkdir("\x74\x65\155\x70\x2f"); goto Y7Oyd; OmqDf: $smtp_backup_type = $config["\163\155\x74\160\137\x62\141\143\x6b\165\x70\x5f\164\171\x70\x65"]; goto vxOJO; DSQbM: return $this->success(); goto wnf25; SSc7N: $smtp_backup_types = explode("\54", $smtp_backup_type); goto tmEjp; ZQmIk: $config = ifeiwu\Config::get("\142\141\x63\153\x75\160"); goto OmqDf; UZPAU: if ($false_count > 0) { goto GzM1o; } goto DSQbM; wnf25: goto GUu8b; goto xbdQG; Y7Oyd: if (!$smtp_backup_type) { goto t1uDm; } goto SSc7N; bfCBB: GUu8b: goto KRcuy; xbdQG: GzM1o: goto sXAdG; vxOJO: $false_count = 0; goto JxYHn; YcmqT: wCY8F: goto Ny9Lg; sXAdG: return $this->error("\346\x9c\x89\xe9\x83\xa8\xe5\210\206\346\x95\xb0\xe6\215\xae\345\244\207\344\xbb\275\xe5\244\261\xe8\xb4\xa5\xef\xbc\x81"); goto bfCBB; C2M9r: foreach ($qiniu_backup_types as $type) { goto U05eY; Xtlle: cn8Rh: goto Vz5sH; U05eY: $config["\142\x61\143\153\x75\x70\x5f\164\171\x70\145"] = $type; goto Xjr1B; Vz5sH: @unlink("\164\x65\x6d\x70\x2f" . $config["\142\141\143\x6b\165\160\137\156\x61\x6d\145"]); goto ozYsL; r9ajl: $false_count++; goto Xtlle; ozYsL: J136C: goto aWnIs; Z2XTU: if ($this->_backupQiniu($config)) { goto cn8Rh; } goto r9ajl; Xjr1B: $config["\x62\x61\x63\153\x75\x70\x5f\156\141\155\145"] = $this->_getPackedFileName($type); goto Z2XTU; aWnIs: } goto YcmqT; tmEjp: foreach ($smtp_backup_types as $type) { goto q_Pri; Ub0yI: $false_count++; goto iap5k; iap5k: e6M7u: goto WiK1N; kQCwe: $config["\142\x61\143\153\x75\x70\x5f\x6e\141\155\x65"] = $this->_getPackedFileName($type); goto WwHSl; q_Pri: $config["\x62\x61\143\x6b\x75\x70\x5f\x74\171\x70\145"] = $type; goto kQCwe; MTt0e: Kl6ZO: goto SZDHM; WiK1N: @unlink("\164\145\155\x70\57" . $config["\142\x61\x63\x6b\165\160\x5f\x6e\x61\x6d\145"]); goto MTt0e; WwHSl: if ($this->_backupEmail($config)) { goto e6M7u; } goto Ub0yI; SZDHM: } goto i10C0; Ny9Lg: MJeXG: goto UZPAU; kqeqs: set_time_limit(0); goto ZQmIk; i10C0: nL3CL: goto HyYFC; OBeng: $qiniu_backup_type = $config["\x71\151\156\151\165\x5f\142\x61\x63\x6b\165\x70\137\x74\x79\x70\145"]; goto fmd1i; fmd1i: if (!$qiniu_backup_type) { goto MJeXG; } goto NLyrW; HyYFC: t1uDm: goto OBeng; KRcuy: } private function _getPackedFileName($type) { goto oxiF7; LIzQ4: $bool = $archive->create("\56\56\x2f\141\x73\x73\x65\164\54\x2e\x2e\57\143\157\x6e\x74\162\x6f\154\x6c\145\x72\x2c\x2e\x2e\x2f\143\157\156\146\151\147\x2c\56\56\x2f\x69\146\145\151\x77\165\54\56\56\x2f\166\x69\x65\x77\54\x2e\56\57\x63\157\x6d\155\x6f\156\x2e\x70\150\160\x2c\56\x2e\57\x69\156\144\x65\x78\x2e\x70\x68\160\x2c\56\56\57\56\150\164\141\x63\143\145\x73\163\x2c\56\x2e\57\156\147\x69\x6e\x78\56\x63\157\156\146", PCLZIP_OPT_REMOVE_PATH, "\56\56\x2f"); goto e4Fl5; plnBN: if (!$bool) { goto nFviH; } goto Ivplx; uJyrN: goto eqbBT; goto Janen; wZ51u: if ($type == "\x63\x6f\x64\145") { goto EQiph; } goto bh0v_; k0MfS: $archive = new PclZip($zip_path); goto JJ8u3; Bn6sx: npsMX: goto H98Cr; ZWpmQ: $zip_name = $name . "\56\164\x61\x72\56\147\x7a"; goto ssz40; gJZZY: if ($type == "\x64\x62") { goto E4sO_; } goto MlkC1; ssz40: $zip_path = "\164\145\x6d\x70\57" . $zip_name; goto gJZZY; ByJQH: $archive = new PclZip($zip_path); goto LIzQ4; WN5L7: @unlink($sql_name); goto bkhN_; Ivplx: $archive = new PclZip($zip_path); goto tlvRW; Wdl3M: goto eqbBT; goto o5Ok5; orfr8: goto BXLIs; goto Bn6sx; oxiF7: ifeiwu\Loader::import("\x65\x78\x74\145\156\144\57\120\143\x6c\x5a\151\x70"); goto JxmAv; ZKFL3: return ''; goto orfr8; pAPiv: $mb->setName($sql_name); goto dAa_4; JxmAv: $name = date("\x59\155\x64\x48\151\x73") . "\137" . $type; goto ZWpmQ; bkhN_: nFviH: goto uJyrN; tlvRW: $bool = $archive->create($sql_name); goto WN5L7; MhzJ4: if ($bool) { goto npsMX; } goto ZKFL3; OYyQo: $mb = new MysqlBackup(ifeiwu\Config::get("\x64\141\x74\x61\x62\x61\x73\145")); goto sJ8CU; MlkC1: if ($type == "\144\141\x74\x61") { goto Ml4BJ; } goto wZ51u; VEfmV: $sql_name = $name . "\x2e\x73\161\x6c"; goto w1GCN; w1GCN: ifeiwu\Loader::import("\x65\x78\164\x65\x6e\x64\57\x4d\x79\x73\x71\x6c\x42\x61\x63\x6b\165\160"); goto OYyQo; Janen: Ml4BJ: goto k0MfS; e4Fl5: eqbBT: goto MhzJ4; bh0v_: goto eqbBT; goto mztVo; sJ8CU: $mb->setPath(__DIR__); goto pAPiv; dAa_4: $bool = $mb->export(); goto plnBN; o5Ok5: EQiph: goto ByJQH; r6ffD: BXLIs: goto HZrtn; H98Cr: return $zip_name; goto r6ffD; JJ8u3: $bool = $archive->create("\x2e\x2e\x2f\144\141\164\x61", PCLZIP_OPT_REMOVE_PATH, "\x2e\x2e\x2f"); goto Wdl3M; mztVo: E4sO_: goto VEfmV; HZrtn: } private function _backupQiniu($config) { goto GVL5j; e6tI7: $bucket = $config["\x71\x69\x6e\x69\165\137\142\165\x63\153\145\164\x5f\156\141\x6d\x65"]; goto O06Ye; KjGCH: return true; goto B1Iom; g3gH7: return false; goto Drqxp; sMuYa: $secretKey = $config["\x71\151\x6e\151\165\137\163\x65\143\162\x65\164\x5f\153\x65\171"]; goto kx6k4; eb2UQ: $this->_debug($err); goto g3gH7; ah_k2: XsQvK: goto eb2UQ; xfwKf: list($ret, $err) = $uploadMgr->putFile($token, $key, $filename); goto aM16W; O06Ye: $token = $auth->uploadToken($bucket); goto QF0oQ; kJH6o: $accessKey = $config["\161\151\156\151\165\x5f\x61\x63\143\x65\x73\163\x5f\x6b\x65\171"]; goto sMuYa; B1Iom: goto ygKLI; goto ah_k2; GVL5j: require_once VEN_PATH . "\121\x69\156\151\x75\57\146\165\x6e\x63\x74\x69\157\x6e\163\x2e\160\150\160"; goto kJH6o; QF0oQ: $filename = __DIR__ . "\57\x74\x65\x6d\x70\x2f" . $config["\x62\x61\143\x6b\165\x70\137\x6e\x61\155\145"]; goto mDKGV; Drqxp: ygKLI: goto W_g95; aM16W: if ($err !== null) { goto XsQvK; } goto KjGCH; mDKGV: $key = $config["\x62\x61\143\153\x75\x70\137\x6e\x61\x6d\145"]; goto WIhPo; WIhPo: $uploadMgr = new \Qiniu\Storage\UploadManager(); goto xfwKf; kx6k4: $auth = new \Qiniu\Auth($accessKey, $secretKey); goto e6tI7; W_g95: } private function _backupEmail($config) { goto ukcE1; ibTce: $this->_debug($mailer->ErrorInfo); goto xOyDw; wEe0K: goto W0g6n; goto A1rxq; AOnu7: if ($backup_type == "\144\x62") { goto qLVnu; } goto WKXAn; mqSt3: ifeiwu\Loader::import("\x65\x78\164\145\x6e\x64\57\x4d\141\x69\154\145\x72"); goto jw2pr; YmwSh: $filename = __DIR__ . "\57\164\x65\155\x70\57" . $config["\142\x61\143\x6b\165\x70\137\x6e\141\x6d\x65"]; goto AOnu7; GiZVV: if (!$config["\x62\141\143\153\165\x70\x5f\156\x61\x6d\x65"]) { goto pPaSM; } goto JY4jw; RRzeI: bH5ot: goto w9JFT; CoOil: $backup_name = $config["\x62\141\x63\x6b\165\x70\x5f\x6e\141\x6d\x65"]; goto YmwSh; LmGIV: goto AD3aL; goto zP8CS; NK7Uz: ybCCN: goto lLFL3; ukcE1: ini_set("\155\145\155\x6f\162\x79\x5f\x6c\x69\155\151\164", -1); goto mqSt3; oqR0v: OvyD4: goto VXKd_; L8Tzf: if ($mailer->send()) { goto QgdZz; } goto ibTce; f1e4O: YeVPj: goto itV9w; jw2pr: $mailer = new Mailer(array("\x73\155\x74\x70\137\144\x65\x62\x75\147" => 0, "\x73\155\164\160\137\141\x75\164\x68" => true, "\163\155\164\x70\137\150\157\163\164" => $config["\x73\155\164\x70\x5f\x68\157\x73\x74"], "\x73\x6d\164\160\137\160\x6f\162\164" => $config["\x73\x6d\x74\160\137\x70\x6f\x72\164"], "\163\x6d\164\x70\137\163\x73\x6c" => $config["\163\x6d\x74\160\137\x73\x73\x6c"], "\163\155\x74\x70\x5f\165\163\x65\x72" => $config["\163\155\164\160\137\x75\x73\x65\162"], "\x73\x6d\x74\160\x5f\x70\x61\x73\x73" => $config["\163\155\164\160\x5f\x70\x61\x73\163"], "\x73\x6d\164\x70\137\146\162\157\x6d\x5f\145\x6d\x61\x69\154" => $config["\163\155\164\x70\137\146\162\x6f\x6d\137\145\x6d\x61\x69\x6c"], "\x73\155\x74\x70\137\x66\162\x6f\155\137\x6e\141\x6d\145" => $config["\x73\x6d\x74\x70\x5f\x66\x72\157\155\x5f\156\x61\155\x65"])); goto R6jbY; PhlRs: $mailer->addAttachment($filename); goto LmGIV; rcZso: return true; goto NK7Uz; cPVSJ: qLVnu: goto ok7cS; R6jbY: $mailer->addAddress($config["\x73\x6d\164\160\x5f\x61\x64\x64\162\145\x73\163"]); goto rrK7O; i1jSZ: $this->_debug($mailer->ErrorInfo); goto c6ab4; xOyDw: return false; goto Mp0c4; SvxKg: $mailer->addAttachment($filename); goto rD1NJ; KGyU7: PR43u: goto p6uRo; rrK7O: $backup_type = $config["\142\141\143\153\165\x70\137\x74\171\x70\x65"]; goto CoOil; Irckt: TYVvX: goto Ll3ud; CZey0: $mailer->setContent(date("\131\xe5\271\xb4\x6d\346\x9c\x88\x64\346\x97\xa5\40\110\xe6\x97\266\x69\xe5\x88\206\x73\xe7\247\222") . "\40\345\244\x87\344\273\xbd\xe6\x88\x90\xe5\212\x9f\357\274\x81", false); goto FVezx; lLFL3: goto GdA0A; goto RRzeI; Ll3ud: goto GdA0A; goto MdDPm; ThVr7: $mailer->setContent(date("\x59\345\xb9\xb4\x6d\346\234\x88\144\xe6\x97\xa5\40\x48\xe6\227\266\x69\xe5\x88\206\x73\xe7\247\222") . "\40\345\244\207\344\xbb\xbd\346\x88\220\345\x8a\237\357\274\x81", false); goto SvxKg; LLek5: IGMPr: goto G17GC; g05Sk: $mailer->setTitle("\xe7\275\x91\347\xab\x99\x5b\344\xb8\xbb\xe7\xa8\x8b\xe5\xba\217\x5d\345\xa4\x87\xe4\273\xbd"); goto bpnzt; FVezx: $mailer->addAttachment($filename); goto wEe0K; lnxCq: $this->_debug($mailer->ErrorInfo); goto kLF73; G17GC: return true; goto f1e4O; BsvH3: if ($backup_type == "\x63\157\144\145") { goto NmBBE; } goto vJDlN; W6lki: AD3aL: goto L8Tzf; I3vK0: goto YeVPj; goto LLek5; fWz0j: goto TYVvX; goto oqR0v; VXKd_: return true; goto Irckt; A1rxq: T2ei2: goto QuckJ; WKXAn: if ($backup_type == "\144\x61\164\x61") { goto bH5ot; } goto BsvH3; QuckJ: $mailer->setContent(date("\x59\xe5\xb9\264\155\346\234\210\144\xe6\x97\245\40\x48\xe6\227\266\x69\xe5\x88\206\163\xe7\247\x92") . "\x20\345\xa4\207\xe4\xbb\275\xe5\244\xb1\350\264\xa5\357\xbc\x81", false); goto iKOUr; c6ab4: return false; goto I3vK0; rD1NJ: goto XDwOE; goto KGyU7; R76Im: QgdZz: goto rcZso; Mp0c4: goto ybCCN; goto R76Im; H8H7q: XDwOE: goto joQ1M; fAnp0: if (!$config["\142\141\x63\153\165\x70\x5f\x6e\141\155\x65"]) { goto PR43u; } goto ThVr7; vJDlN: goto GdA0A; goto cPVSJ; bpnzt: if (!$config["\x62\141\x63\x6b\165\160\x5f\156\141\x6d\x65"]) { goto T2ei2; } goto CZey0; w9JFT: $mailer->setTitle("\xe7\275\221\xe7\253\x99\x5b\xe8\xb5\x84\346\272\220\345\xba\x93\x5d\xe5\244\207\xe4\xbb\275"); goto fAnp0; itV9w: GdA0A: goto O2DaR; joQ1M: if ($mailer->send()) { goto OvyD4; } goto lnxCq; iKOUr: W0g6n: goto RRXoW; JY4jw: $mailer->setContent(date("\131\345\271\xb4\x6d\346\234\210\144\346\x97\xa5\40\110\xe6\227\266\151\345\210\x86\x73\347\xa7\x92") . "\x20\xe5\xa4\207\xe4\xbb\275\346\x88\220\xe5\212\237\357\xbc\x81", false); goto PhlRs; p6uRo: $mailer->setContent(date("\131\345\271\264\155\346\x9c\x88\x64\xe6\227\xa5\x20\110\346\x97\266\x69\xe5\210\x86\163\xe7\xa7\x92") . "\40\xe5\244\207\344\273\275\345\244\xb1\350\xb4\245\357\274\x81", false); goto H8H7q; MdDPm: NmBBE: goto g05Sk; zP8CS: pPaSM: goto vPceW; vPceW: $mailer->setContent(date("\131\xe5\xb9\xb4\155\xe6\234\210\x64\346\x97\245\x20\110\xe6\x97\xb6\151\345\210\206\163\xe7\xa7\x92") . "\40\345\xa4\207\344\273\275\345\xa4\261\350\xb4\xa5\xef\274\x81", false); goto W6lki; kLF73: return false; goto fWz0j; RRXoW: if ($mailer->send()) { goto IGMPr; } goto i1jSZ; ok7cS: $mailer->setTitle("\xe7\275\x91\347\253\231\x5b\346\225\260\346\215\256\xe5\272\223\x5d\345\244\x87\xe4\xbb\xbd"); goto GiZVV; O2DaR: } private function _runtime() { goto qUt4s; SQcYX: $env["\163\x79\163\164\x65\x6d"] = php_uname("\163") . "\40" . php_uname("\x72"); goto SnZbO; Zbl6C: $env["\155\x79\163\161\154"] = "\x4d\171\x53\161\154\x20" . substr($mysql, 0, strpos($mysql, "\x2d")); goto JTI_1; qUt4s: $env = array(); goto SQcYX; SnZbO: $env["\144\151\162\x72\157\157\164"] = getenv("\x44\x4f\x43\x55\115\x45\x4e\124\137\x52\x4f\117\124"); goto i8Oyo; De6VA: return $env; goto A6GuY; R1jGg: $mysql = $this->db->query("\163\145\x6c\x65\x63\x74\x20\166\x65\162\163\x69\157\x6e\x28\51\x3b")->get(0); goto Zbl6C; JTI_1: $php = phpversion(); goto kkwKz; kkwKz: $env["\160\150\x70"] = "\x50\x48\120\40" . substr($php, 0, strpos($php, "\x2d")); goto ZKz79; ZKz79: $env["\x75\160\154\x6f\x61\144"] = ini_get("\146\151\x6c\x65\137\x75\160\154\x6f\141\x64\x73") ? ini_get("\x75\x70\154\157\141\144\x5f\x6d\x61\x78\137\x66\151\154\x65\x73\x69\172\145") : "\104\151\163\141\142\154\x65\x64"; goto De6VA; i8Oyo: $env["\141\160\141\143\x68\145"] = apache_get_version(); goto R1jGg; A6GuY: } }
