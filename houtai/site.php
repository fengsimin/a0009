<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\151\164\x65"; parent::__construct(); } protected function getData() { goto IW9Jf; AOZyX: return $this->success($site); goto Zi_ro; Zg_6G: foreach ($data as $d) { goto DOSKX; eREFL: if (!($value != '')) { goto Oi1YL; } goto CR5Fo; DOSKX: $value = $d["\166\141\x6c\x75\x65"]; goto eREFL; CR5Fo: $site[$d["\x6e\x61\155\x65"]] = $value; goto tdw6h; JDbYg: icptj: goto nqjDJ; tdw6h: Oi1YL: goto JDbYg; nqjDJ: } goto B1GYj; IW9Jf: $data = $this->db->select($this->table)->all(); goto z_KUG; z_KUG: $site = array(); goto Zg_6G; B1GYj: SJ4OK: goto AOZyX; Zi_ro: } protected function postSave($request_data) { goto dZQQE; D1fVE: return $this->error("\xe5\267\262\344\xbf\x9d\345\255\230\xe5\244\261\xe8\264\245\xef\xbc\x81"); goto Z74Lu; U2T94: $error = array(); goto h_daX; bd3Vs: if (count($error) === 0) { goto CHtoB; } goto I4sgd; RTZno: l_byd: goto N80y8; JbULC: CHtoB: goto m4n0g; OfR21: foreach ($request_data as $name => $value) { goto QkSof; vPPT3: iTZkZ: goto LmGaN; QkSof: $count = $this->db->select($this->table)->where(array("\156\141\155\x65", "\x3d", $name))->count(); goto CMSFb; Qd6w_: $error[] = $name; goto iMtHX; CMSFb: $value = $this->_encode($value); goto b32qy; ajK1u: if (!($this->db->update($this->table, array("\x76\x61\154\165\145" => $value), array("\156\x61\155\145", "\75", $name))->is() === false)) { goto kowyZ; } goto O3qdg; mHfo5: NMbyp: goto MpfFC; iMtHX: mJ6kF: goto xOglR; EezVF: kowyZ: goto B2SOy; LmGaN: if (!($this->db->insert($this->table, array("\x6e\x61\155\145" => $name, "\x76\141\x6c\x75\145" => $value))->is() === false)) { goto mJ6kF; } goto Qd6w_; B2SOy: goto FCbDn; goto vPPT3; O3qdg: $error[] = $name; goto EezVF; xOglR: FCbDn: goto mHfo5; b32qy: if ($count <= 0) { goto iTZkZ; } goto ajK1u; MpfFC: } goto TxsHr; t1MhS: $this->_log("\165\160\x64\141\x74\145", array("\x74\151\164\154\145" => "\xe7\275\x91\xe7\253\x99\xe8\256\xbe\347\xbd\256")); goto Xixat; I4sgd: $this->db->rollBack(); goto D1fVE; m4n0g: $this->db->commit(); goto t1MhS; TxsHr: qtqDp: goto bd3Vs; dZQQE: $this->_removeFiles2($request_data["\137\x72\x65\155\x6f\166\145\146\x69\x6c\145\163"]); goto zXnCD; zXnCD: unset($request_data["\164\x6f\153\145\156"], $request_data["\x61\144\155\x69\156"], $request_data["\x5f\x72\145\155\x6f\x76\145\146\151\154\x65\x73"]); goto U2T94; Xixat: return $this->success("\345\xb7\262\xe4\xbf\235\345\xad\x98\xe6\233\264\xe6\224\xb9\357\xbc\x81"); goto RTZno; Z74Lu: goto l_byd; goto JbULC; h_daX: $this->db->beginTransaction(); goto OfR21; N80y8: } protected function postSkin($request_data) { goto stGdi; h99Pw: if (!isset($request_data["\x74\x68\145\x6d\145\x2d\163\153\151\x6e"])) { goto h77y3; } goto B8Yk0; cIW6P: $request_data["\x73\153\151\156"] = $skins[1]; goto lezw6; CfQvs: $request_data["\x74\150\x65\155\x65"] = $skins[0]; goto cIW6P; sZUaA: return $this->success("\345\267\262\344\277\235\xe5\xad\230\xe6\x9b\xb4\346\224\271\xef\xbc\201"); goto yspP0; jT_up: unset($request_data["\164\x6f\153\x65\x6e"], $request_data["\x61\144\155\x69\x6e"], $request_data["\163\164\x79\x6c\x65\x2d\x63\157\144\145"]); goto h99Pw; lezw6: h77y3: goto rV9XA; B8Yk0: $skins = explode("\55", $request_data["\164\x68\145\155\145\x2d\x73\x6b\x69\156"]); goto CfQvs; SbuYF: g_czv: goto jT_up; ps3aL: file_put_contents($filename, $request_data["\163\x74\x79\154\x65\x2d\x63\157\144\145"]); goto JDdqU; dntZ4: $filename = "\x2e\56\57\x61\x73\x73\x65\164\x2f\143\x73\163\x2f\163\164\171\154\x65\x2e\143\163\163"; goto ps3aL; JDdqU: chmod($filename, 420); goto SbuYF; rV9XA: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\141\x6d\x65" => $name, "\166\x61\154\x75\145" => $value), array("\156\x61\x6d\x65", "\x3d", $name)); NRUmo: } goto HpKVr; stGdi: if (!isset($request_data["\x73\164\x79\x6c\145\55\143\x6f\144\145"])) { goto g_czv; } goto dntZ4; HpKVr: D_TML: goto sZUaA; yspP0: } protected function getStyleCode() { $code = file_get_contents("\x2e\56\x2f\141\163\163\x65\x74\57\x63\163\163\x2f\x73\x74\171\154\145\x2e\x63\163\x73"); return $this->success(array($code)); } }
